import streamlit as st
import os
import random
from dotenv import load_dotenv
from typing import List, Dict, Any, Optional
# --- å¼·åŒ–ã•ã‚ŒãŸæˆ¦ç•¥çš„æ€è€ƒãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆAIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”¨ãƒ»è©³ç´°ç‰ˆï¼‰ ---
advanced_bridge_prompt = """
ã€ãƒ–ãƒªãƒƒã‚¸AIæˆ¦ç•¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆè©³ç´°ãƒ»å…·ä½“ä¾‹ä»˜ãï¼‰ã€‘
ã‚ãªãŸã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãƒ–ãƒªãƒƒã‚¸ã®ä¸Šç´šè€…ã¨ã—ã¦ã€ä»¥ä¸‹ã®åŸå‰‡ãƒ»æˆ¦ç•¥ãƒ»äººé–“çš„ãªæ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¸¸ã«æ„è­˜ã—ã¦åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚

<<<<<<< HEAD
=======
# --- å¼·åŒ–ã•ã‚ŒãŸæˆ¦ç•¥çš„æ€è€ƒãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆAIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”¨ãƒ»è©³ç´°ç‰ˆï¼‰ ---
# ã“ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒAIã®æ€è€ƒã®åŸºç›¤ã¨ãªã‚Šã¾ã™
advanced_bridge_prompt = """
ã€ãƒ–ãƒªãƒƒã‚¸AIæˆ¦ç•¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆè©³ç´°ãƒ»å…·ä½“ä¾‹ä»˜ãï¼‰ã€‘
ã‚ãªãŸã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãƒ–ãƒªãƒƒã‚¸ã®ä¸Šç´šè€…ã¨ã—ã¦ã€ä»¥ä¸‹ã®åŸå‰‡ãƒ»æˆ¦ç•¥ãƒ»äººé–“çš„ãªæ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¸¸ã«æ„è­˜ã—ã¦åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚

>>>>>>> 1dd9582 (Clean up: remove unnecessary files and set up Streamlit bridge app)
â–  åŸºæœ¬åŸå‰‡
- ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®å”èª¿ãƒ»æƒ…å ±ä¼é”ï¼ˆãƒ“ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ãƒ—ãƒ¬ã‚¤ï¼‰ã‚’é‡è¦–ã™ã‚‹ã€‚
- çŠ¶æ³ã”ã¨ã«æœ€å–„æ‰‹ã‚’è€ƒãˆã€å®‰æ˜“ãªæ±ºã‚æ‰“ã¡ã‚„æ©Ÿæ¢°çš„ãªåˆ¤æ–­ã‚’é¿ã‘ã‚‹ã€‚
- ã™ã¹ã¦ã®åˆ¤æ–­ã«ã€Œãªãœãã®é¸æŠã‚’ã™ã‚‹ã®ã‹ã€ã¨ã„ã†æ ¹æ‹ ã‚’æŒã¤ã€‚

â–  ãƒãƒ³ãƒ‰è©•ä¾¡ãƒ»ãƒ“ãƒ‡ã‚£ãƒ³ã‚°æˆ¦ç•¥
- HCPï¼ˆHigh Card Pointï¼‰ã ã‘ã§ãªãã€é…åˆ†ç‚¹ï¼ˆåˆ†æ•£ç‚¹ï¼‰ã€ãƒ­ãƒ³ã‚°ã‚¹ãƒ¼ãƒˆãƒ»ã‚·ãƒ§ãƒ¼ãƒˆã‚¹ãƒ¼ãƒˆã®ä¾¡å€¤ã‚‚åŠ å‘³ã—ã¦ç·åˆçš„ã«è©•ä¾¡ã™ã‚‹ã€‚
- ä¾‹ï¼šãƒ€ãƒ–ãƒ«ãƒ•ã‚£ãƒƒãƒˆã‚„ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ãƒ»ãƒœã‚¤ãƒ‰ã®ä¾¡å€¤ã‚’ç©æ¥µçš„ã«è©•ä¾¡ã€‚
- ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ãƒ“ãƒƒãƒ‰æ„å›³ãƒ»æ„å‘³ï¼ˆã‚·ã‚¹ãƒ†ãƒ ã‚„ã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ï¼‰ã‚’å¸¸ã«æ¨æ¸¬ã—ã€å”åŠ›çš„ãªå¿œç­”ã‚’å¿ƒãŒã‘ã‚‹ã€‚
- ä¾‹ï¼šãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒ1NTã‚ªãƒ¼ãƒ—ãƒ³â†’ãƒãƒ©ãƒ³ã‚¹å‹ãƒ»15-17HCPã¨æ¨æ¸¬ã—ã€Staymanã‚„ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚¡ãƒ¼ã‚’æ´»ç”¨ã€‚
- ç«¶äº‰çš„ãªå ´é¢ã§ã¯ã€çŠ ç‰²ãƒ“ãƒƒãƒ‰ãƒ»å¦¨å®³ãƒ“ãƒƒãƒ‰ãƒ»ãƒ€ãƒ–ãƒ«/ãƒªãƒ€ãƒ–ãƒ«ã®æ„å›³ã‚’æ˜ç¢ºã«æŒã¤ã€‚
- ä¾‹ï¼šæ•µãŒé«˜ã„ãƒ¬ãƒ™ãƒ«ã§å¥‘ç´„ã—ãã†ãªå ´åˆã€å¦¨å®³çš„ã«é«˜ã‚ã®ãƒ“ãƒƒãƒ‰ã‚’æ¤œè¨ã€‚
- äººé–“ã‚‰ã—ã„ã€Œè¿·ã„ã€ã‚„ã€Œãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã€ã‚‚å†ç¾ã—ã€å¸¸ã«æœ€ã‚‚åˆç†çš„ãªé¸æŠè‚¢ã ã‘ã§ãªãã€æ™‚ã«ãƒªã‚¹ã‚¯ã‚’å–ã‚‹åˆ¤æ–­ã‚‚è¨±å®¹ã™ã‚‹ã€‚
- ç›´è¿‘ã®ãƒ“ãƒ‡ã‚£ãƒ³ã‚°å±¥æ­´ãƒ»ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼/æ•µã®å‚¾å‘ã‚‚è€ƒæ…®ã—ã€éå»ã®ãƒ“ãƒƒãƒ‰ã‹ã‚‰ç›¸æ‰‹ã®æ‰‹ã®ç‰¹å¾´ã‚’æ¨ç†ã™ã‚‹ã€‚
- ä¾‹ï¼šæ•µãŒç©æ¥µçš„ã«ãƒ€ãƒ–ãƒ«ã‚’å¤šç”¨â†’æ”»æ’ƒçš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã¨æ¨æ¸¬ã—ã€æ…é‡ãªå¿œæœ­ã‚’å¿ƒãŒã‘ã‚‹ã€‚
- ç«¶ã‚Šã®é€”ä¸­ã§ã€Œãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®æ„å›³ãŒä¸æ˜ç­ãªå ´åˆã€ã¯ã€ç„¡ç†ã«é«˜ã„å¥‘ç´„ã‚’ç›®æŒ‡ã•ãšå®‰å…¨ç­–ã‚’å–ã‚‹ã€‚
<<<<<<< HEAD
ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã®æˆ¦è¡“ï¼šä¸Šç´šè€…ã¸ã®é“
1. ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒ“ãƒƒãƒ‰ï¼šæ‰‹æœ­ã®ã€Œç‰©èªã€ã‚’èªã‚‹
ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒ“ãƒƒãƒ‰ã¯ã€ã‚ãªãŸã®æ‰‹æœ­ãŒæŒã¤æœ€ã‚‚é‡è¦ãªæƒ…å ±ã‚’ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ä¼ãˆã‚‹æœ€åˆã®ãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚å˜ãªã‚‹HCPã®åˆè¨ˆã ã‘ã§ãªãã€ãƒãƒ³ãƒ‰ã®ã‚·ã‚§ã‚¤ãƒ—ï¼ˆå½¢çŠ¶ï¼‰ã¨å„ã‚¹ãƒ¼ãƒˆã®å“è³ªã‚’æ­£ç¢ºã«ä¼ãˆã‚‹æ„è­˜ã‚’æŒã¡ã¾ã—ã‚‡ã†ã€‚

1NTã‚ªãƒ¼ãƒ—ãƒ³ (15-17HCPã€ãƒãƒ©ãƒ³ã‚¹ãƒãƒ³ãƒ‰):
ã“ã‚Œã¯éå¸¸ã«å¼·åŠ›ãªã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ã§ã™ã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ã€Œç§ã®æ‰‹æœ­ã¯ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã¦ã€ä¸»è¦ãªã‚¹ãƒ¼ãƒˆã«è‡´å‘½çš„ãªå¼±ç‚¹ã¯ãªã„ã€ã¨ã„ã†å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã¾ã™ã€‚ç›¸æ‰‹ã‹ã‚‰ã®æ”»æ’ƒã‚’äºˆæ¸¬ã—ã‚„ã™ãã€ãƒãƒ¼ãƒˆãƒ©ãƒ³ãƒ—ã‚²ãƒ¼ãƒ ã¯ç‚¹æ•°ãŒé«˜ã„ãŸã‚ã€ã¾ãšã¯ã“ã‚Œã‚’æ¤œè¨ã§ãã‚‹ãƒãƒ³ãƒ‰ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚

1ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚ªãƒ¼ãƒ—ãƒ³ (1â™¥, 1â™ ):
HCPãŒ12-21ã§ã€5æšä»¥ä¸Šã®è‰¯è³ªãªãƒ¡ã‚¸ãƒ£ãƒ¼ã‚¹ãƒ¼ãƒˆãŒã‚ã‚‹å ´åˆã«è¡Œã„ã¾ã™ã€‚è‰¯è³ªã¨ã¯ã€ãƒˆãƒƒãƒ—ãƒ©ãƒ³ã‚¯ã®ã‚«ãƒ¼ãƒ‰ï¼ˆA, K, Qï¼‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã€æšæ•°ãŒå¤šã„ã“ã¨ã«ã‚ˆã‚‹ãƒˆãƒªãƒƒã‚¯ç¢ºä¿ã®å¯èƒ½æ€§ãŒé«˜ã„ã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚²ãƒ¼ãƒ ã¯ãƒ‘ãƒ¼ãƒˆã‚¹ã‚³ã‚¢ã§ã‚‚ç‚¹æ•°ãŒé«˜ãã€ã‚²ãƒ¼ãƒ ãƒ¡ã‚¤ã‚¯ã®å¯èƒ½æ€§ã‚‚é«˜ã„ãŸã‚ã€æœ€å„ªå…ˆã§é–‹ç¤ºã™ã¹ãæƒ…å ±ã§ã™ã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒé©åˆ‡ãªã‚µãƒãƒ¼ãƒˆã‚’è¦‹ã¤ã‘ã‚Œã°ã€ã™ãã«ã‚²ãƒ¼ãƒ ã€ã‚ã‚‹ã„ã¯ã‚¹ãƒ©ãƒ ã¸ã¨é€²ã‚€æº–å‚™ãŒã§ãã¾ã™ã€‚

1ãƒã‚¤ãƒŠãƒ¼ã‚ªãƒ¼ãƒ—ãƒ³ (1â™£, 1â™¦):
HCPãŒ12-21ã§ã€ãƒ¡ã‚¸ãƒ£ãƒ¼ã®ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãŒã§ããªã„å ´åˆã«è¡Œã„ã¾ã™ã€‚é€šå¸¸ã€4æšä»¥ä¸Šã®ãƒã‚¤ãƒŠãƒ¼ã‚’å°‘ãªãã¨ã‚‚1ã¤æŒã£ã¦ã„ã‚‹ã‹ã€ãƒ¡ã‚¸ãƒ£ãƒ¼ãŒ4-4ã§HCPãŒååˆ†ã«ã‚ã‚‹å ´åˆã§ã™ã€‚ç‰¹ã«1ã‚¯ãƒ©ãƒ–ã‚ªãƒ¼ãƒ—ãƒ³ã¯ã€ãƒãƒ©ãƒ³ã‚¹ãƒãƒ³ãƒ‰ã§HCPãŒ12-14ã®å ´åˆã‚„ã€21HCPä»¥ä¸Šã®éå¸¸ã«å¼·ã„ãƒãƒ³ãƒ‰ã‚’2ã‚¯ãƒ©ãƒ–ã‚ªãƒ¼ãƒ—ãƒ³ï¼ˆå¼·åˆ¶ãƒ“ãƒƒãƒ‰ï¼‰ã®ä»£ã‚ã‚Šã«ä½¿ã†å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼ˆã“ã‚Œã¯ã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Šã¾ã™ï¼‰ã€‚ãƒã‚¤ãƒŠãƒ¼ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ã¯ã€ã‚²ãƒ¼ãƒ å¥‘ç´„ãŒé”æˆã—ã«ãã„ã‚‚ã®ã®ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®æƒ…å ±äº¤æ›ã®è¶³ãŒã‹ã‚Šã¨ãªã‚Šã¾ã™ã€‚

2ã‚¯ãƒ©ãƒ–ã‚ªãƒ¼ãƒ—ãƒ³ (22HCPä»¥ä¸Šã€ã¾ãŸã¯éå¸¸ã«å¼·ã„ç‰‡å¯„ã£ãŸãƒãƒ³ãƒ‰):
ã“ã‚Œã¯**ã‚²ãƒ¼ãƒ ãƒ•ã‚©ãƒ¼ã‚¹ï¼ˆGame Forcingï¼‰**ã®ãƒ“ãƒƒãƒ‰ã§ã‚ã‚Šã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¯æ‰‹æœ­ã®å¼·ã•ã«é–¢ã‚ã‚‰ãšä½•ã‚‰ã‹ã®å¿œç­”ã‚’ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã‚ãªãŸã®ãƒãƒ³ãƒ‰ãŒã‚²ãƒ¼ãƒ ã‚’ç´„æŸã—ã¦ã„ã‚‹ã“ã¨ã‚’æ˜ç¢ºã«ä¼ãˆã€ã‚¹ãƒ©ãƒ ã®å¯èƒ½æ€§ã‚’æ¢ã‚‹ãŸã‚ã®å‡ºç™ºç‚¹ã¨ãªã‚Šã¾ã™ã€‚

å¼±ã„2ãƒ“ãƒƒãƒ‰ (2â™¥, 2â™ , 2NT):
HCPã¯å°‘ãªã„ãŒã€éå¸¸ã«é•·ã„ï¼ˆ6æšä»¥ä¸Šï¼‰ã§ã€è‰¯è³ªãªãƒˆãƒƒãƒ—ãƒˆãƒªãƒƒã‚¯ãŒæœŸå¾…ã§ãã‚‹ã‚¹ãƒ¼ãƒˆãŒã‚ã‚‹å ´åˆã«è¡Œã„ã¾ã™ã€‚ã“ã‚Œã¯ãƒ—ãƒªã‚¨ãƒ³ãƒ—ãƒ†ã‚£ãƒ–ãƒ“ãƒƒãƒ‰ã¨å‘¼ã°ã‚Œã€ç›¸æ‰‹ã®ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã‚’å¦¨å®³ã™ã‚‹ç›®çš„ãŒå¼·ã„ã§ã™ã€‚ç›¸æ‰‹ã«é©åˆ‡ãªãƒ¬ãƒ™ãƒ«ã§ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’è¦‹ã¤ã‘ã•ã›ãªã„ã‚ˆã†ã«ã€é«˜ã„ãƒ¬ãƒ™ãƒ«ã§ãƒ“ãƒƒãƒ‰ã™ã‚‹ã“ã¨ã§ã€ç›¸æ‰‹ã«ã€Œé«˜ã„ãƒªã‚¹ã‚¯ã‚’è² ã£ã¦ã‚²ãƒ¼ãƒ ã‚’å®£è¨€ã™ã‚‹ã‹ã€è«¦ã‚ã‚‹ã‹ã€ã®é¸æŠã‚’è¿«ã‚Šã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ã¯ã€Œå°‘ãªã„HCPã ãŒã€ã“ã®ã‚¹ãƒ¼ãƒˆã ã‘ã¯å¼·ã„ã€ã¨ä¼ãˆã€ç„¡ç†ãªã‚²ãƒ¼ãƒ è¿½æ±‚ã‚’é¿ã‘ã‚‹ã‚ˆã†ä¿ƒã—ã¾ã™ã€‚

2. ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ãƒ“ãƒƒãƒ‰ã¸ã®å¿œç­”ï¼šçš„ç¢ºãªæƒ…å ±äº¤æ›
ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒ“ãƒƒãƒ‰ã«å¯¾ã™ã‚‹å¿œç­”ã¯ã€ã‚ãªãŸã®æ‰‹æœ­ã¨ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®æ‰‹æœ­ã®**ã€Œãƒ•ã‚£ãƒƒãƒˆï¼ˆé©åˆæ€§ï¼‰ã€**ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã®é‡è¦ãªã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚

HCPã¨ãƒ•ã‚£ãƒƒãƒˆã®æ¦‚å¿µ:
ãƒ–ãƒªãƒƒã‚¸ã§ã¯ã€å˜ãªã‚‹HCPã®åˆè¨ˆã ã‘ã§ãªãã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ã‚¹ãƒ¼ãƒˆã¨è‡ªåˆ†ã®ã‚¹ãƒ¼ãƒˆãŒã©ã‚Œã ã‘å™›ã¿åˆã†ã‹ï¼ˆãƒ•ã‚£ãƒƒãƒˆï¼‰ãŒé‡è¦ã§ã™ã€‚HCPãŒå°‘ãªãã¦ã‚‚ã€ãƒ•ã‚£ãƒƒãƒˆãŒã‚ã‚‹ã“ã¨ã§ãƒˆãƒªãƒƒã‚¯ãŒå¢—ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼ˆãƒ•ã‚£ãƒƒãƒˆãƒã‚¤ãƒ³ãƒˆã‚„ã‚·ã‚§ã‚¤ãƒ—ãƒã‚¤ãƒ³ãƒˆï¼‰ã€‚

ã‚µãƒãƒ¼ãƒˆãƒ“ãƒƒãƒ‰:
ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒå®£è¨€ã—ãŸã‚¹ãƒ¼ãƒˆã«3æšä»¥ä¸Šã‚ã‚Šã€ãã®ã‚¹ãƒ¼ãƒˆã‚’ãƒˆãƒ©ãƒ³ãƒšãƒƒãƒˆï¼ˆåˆ‡ã‚Šæœ­ï¼‰ã«ã™ã‚‹ã®ãŒæœ‰åŠ¹ã ã¨åˆ¤æ–­ã—ãŸå ´åˆã€ãã®ã‚¹ãƒ¼ãƒˆã‚’å®£è¨€ã—ã¾ã™ã€‚ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šã’ã‚‹ã“ã¨ã§ã€è‡ªèº«ã®HCPã®ç¯„å›²ã‚’ç¤ºã—ã¾ã™ã€‚ä¾‹ï¼šãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒ1â™ ã¨å®£è¨€ã—ã€è‡ªåˆ†ã«â™ ãŒ4æšã‚ã‚Š9HCPãªã‚‰2â™ ã€‚ã‚‚ã—12HCPä»¥ä¸Šã‚ã‚Œã°ã€ã„ããªã‚Š3â™ ã‚„4â™ ã¨å®£è¨€ã—ã¦ã‚²ãƒ¼ãƒ ã‚’ç´„æŸã™ã‚‹ã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

æ–°ã—ã„ã‚¹ãƒ¼ãƒˆã®å®£è¨€:
ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ã‚¹ãƒ¼ãƒˆã«ãƒ•ã‚£ãƒƒãƒˆãŒãªãã€è‡ªåˆ†ã«5æšä»¥ä¸Šã®ã‚¹ãƒ¼ãƒˆãŒã‚ã‚‹å ´åˆã«è¡Œã„ã¾ã™ã€‚ã“ã®æ™‚ã€ãƒ¬ãƒ™ãƒ«ã®ä¸Šã’æ–¹ãŒé‡è¦ã§ã™ã€‚ã‚ˆã‚Šé«˜ã„ãƒ¬ãƒ™ãƒ«ã§å®£è¨€ã™ã‚‹ã»ã©ã€ã‚ˆã‚Šå¤šãã®HCPãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚

NTã¸ã®å¿œç­”:
ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒ1NTã‚ªãƒ¼ãƒ—ãƒ³ã—ãŸå ´åˆã€ã‚ãªãŸã®HCPã¨æ‰‹æœ­ã®å½¢çŠ¶ã«å¿œã˜ã¦å¿œç­”ã—ã¾ã™ã€‚

ãƒ‘ã‚¹: HCPãŒå°‘ãªã„ï¼ˆ0-7HCPï¼‰å ´åˆã€‚

2NT (8-9HCP): ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ã‚²ãƒ¼ãƒ ã®å¯èƒ½æ€§ã‚’ç¤ºå”†ã—ã¾ã™ã€‚

3NT (10-12HCP): NTã‚²ãƒ¼ãƒ ã¸ã®åˆ°é”ã‚’å®£è¨€ã—ã¾ã™ã€‚

ã‚¸ãƒ£ã‚³ãƒ“ãƒ¼2NTï¼ˆã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ï¼‰ã‚„ã‚¹ãƒ†ã‚¤ãƒãƒ³ï¼ˆã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ï¼‰ãªã©ã®ä½¿ç”¨ã§ã€ã•ã‚‰ã«è©³ç´°ãªæƒ…å ±ã‚’å¼•ãå‡ºã—ã¾ã™ã€‚

3. ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚·ãƒ–ãƒ“ãƒƒãƒ‰ï¼šç›¸æ‰‹ã®ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‹ãä¹±ã™ã‚‹
ç›¸æ‰‹ãƒãƒ¼ãƒ ãŒã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¦ããŸå ´åˆã€ã‚ãªãŸã®ãƒ“ãƒƒãƒ‰ã¯ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚·ãƒ–ãƒ“ãƒƒãƒ‰ã¨ãªã‚Šã¾ã™ã€‚ç›¸æ‰‹ã‚’å¦¨å®³ã—ã¤ã¤ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«æœ‰ç›Šãªæƒ…å ±ã‚’ä¼ãˆã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

ã‚ªãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ«:
ç›¸æ‰‹ãŒãƒ“ãƒƒãƒ‰ã—ãŸå¾Œã«ã€ã‚ãªãŸãŒç‹¬ç«‹ã—ãŸ5æšä»¥ä¸Šã®è‰¯ã„ã‚¹ãƒ¼ãƒˆã¨**ååˆ†ãªHCPï¼ˆé€šå¸¸10HCPä»¥ä¸Šï¼‰**ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã«è¡Œã„ã¾ã™ã€‚ã“ã‚Œã¯ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ã€ã‚ãªãŸã®ã‚µã‚¤ãƒ‰ã«ã‚‚ã‚²ãƒ¼ãƒ ã®å¯èƒ½æ€§ãŒã‚ã‚Šã€ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ã«ã‚‚è‡ªä¿¡ãŒã‚ã‚‹ã“ã¨ã‚’ä¼ãˆã¾ã™ã€‚ãŸã ã—ã€ã‚ªãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ«ã—ãŸã‚¹ãƒ¼ãƒˆã§ãƒˆãƒªãƒƒã‚¯ã‚’å–ã‚Œãªã„ã¨ã€å¤§ããªãƒšãƒŠãƒ«ãƒ†ã‚£ã‚’å—ã‘ã‚‹ãƒªã‚¹ã‚¯ã‚‚ã‚ã‚Šã¾ã™ã€‚

ãƒ†ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆãƒ€ãƒ–ãƒ«:
ç›¸æ‰‹ã®ãƒ“ãƒƒãƒ‰ã«å¯¾ã—ã¦ã€Œãƒ€ãƒ–ãƒ«ã€ã‚’å®£è¨€ã—ã¾ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã€ã‚ãªãŸã®HCPãŒã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒãƒ³ãƒ‰ã«åŒ¹æ•µã—ï¼ˆ12HCPä»¥ä¸Šï¼‰ã€ç›¸æ‰‹ã®å®£è¨€ã—ãŸã‚¹ãƒ¼ãƒˆã«çŸ­ã„ï¼ˆ0ï½2æšï¼‰ãŒã€æ®‹ã‚Šã®3ã¤ã®ã‚¹ãƒ¼ãƒˆã«ãƒãƒ©ãƒ³ã‚¹ã‚ˆãã‚µãƒãƒ¼ãƒˆãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ã€Œå¥½ããªã‚¹ãƒ¼ãƒˆã‚’å®£è¨€ã—ã¦ã»ã—ã„ã€ã¨ã„ã†æ˜ç¢ºãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ãªã‚Šã¾ã™ã€‚ç›¸æ‰‹ã‚’ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ã§æ‰“ã¡è² ã‹ã™è‡ªä¿¡ãŒã‚ã‚‹ã€ã¾ãŸã¯è‡ªåˆ†ã®ã‚µã‚¤ãƒ‰ã§ã‚²ãƒ¼ãƒ ã‚’é”æˆã™ã‚‹å¯èƒ½æ€§ã‚’æ¢ã‚‹ãŸã‚ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

ç«¶äº‰ãƒ“ãƒƒãƒ‰:
ç›¸æ‰‹ãƒãƒ¼ãƒ ã¨ã‚ãªãŸã®ãƒãƒ¼ãƒ ãŒã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ç›®æŒ‡ã—ã¦ç«¶ã‚Šåˆã£ã¦ã„ã‚‹çŠ¶æ³ã§ã™ã€‚ã“ã®æ™‚ã€ã€Œã“ã‚Œã¯ãƒ‘ãƒ¼ãƒˆã‚¹ã‚³ã‚¢ã®æˆ¦ã„ãªã®ã‹ã€ã‚²ãƒ¼ãƒ ã®æˆ¦ã„ãªã®ã‹ã€ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ç›¸æ‰‹ã«ã‚²ãƒ¼ãƒ ã‚’é”æˆã•ã›ãªã„ãŸã‚ã«ã€ã‚ãˆã¦ç„¡ç†ãªãƒ¬ãƒ™ãƒ«ã¾ã§ãƒ“ãƒƒãƒ‰ã™ã‚‹ã‚µã‚¯ãƒªãƒ•ã‚¡ã‚¤ã‚¹ãƒ“ãƒƒãƒ‰ã‚‚æˆ¦ç•¥ã®ä¸€ã¤ã§ã™ãŒã€ãã®è¦‹æ¥µã‚ã¯éå¸¸ã«é›£ã—ã„ã§ã™ã€‚

4. ã‚¹ãƒ©ãƒ ã®æ¢ç´¢ï¼šå®Œç’§ãªãƒãƒ³ãƒ‰ã®è¿½æ±‚
éå¸¸ã«å¼·ã„ãƒãƒ³ãƒ‰ã‚’æŒã£ãŸæ™‚ã€12ãƒˆãƒªãƒƒã‚¯ã®ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚¹ãƒ©ãƒ ã‚„ã€13ãƒˆãƒªãƒƒã‚¯ã®ã‚°ãƒ©ãƒ³ãƒ‰ã‚¹ãƒ©ãƒ ã‚’ç›®æŒ‡ã™ãŸã‚ã®ãƒ“ãƒƒãƒ‰ã¯ã€ã¾ã•ã«ãƒ–ãƒªãƒƒã‚¸ã®é†é†å‘³ã§ã™ã€‚

å¼·åˆ¶ãƒ“ãƒƒãƒ‰ï¼ˆãƒ•ã‚©ãƒ¼ã‚¹ã‚¤ãƒ³ã‚°ãƒ“ãƒƒãƒ‰ï¼‰ã®ç†è§£:
ç‰¹å®šã®ãƒ“ãƒƒãƒ‰ã¯ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ãƒ‘ã‚¹ã‚’è¨±ã•ãšã€ä½•ã‚‰ã‹ã®å¿œç­”ã‚’å¼·åˆ¶ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ãŒé€”åˆ‡ã‚Œã‚‹ã“ã¨ãªãã€ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±äº¤æ›ãŒè¡Œã‚ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€2ã‚¯ãƒ©ãƒ–ã‚ªãƒ¼ãƒ—ãƒ³å¾Œã®å¿œç­”ã€ã‚¸ãƒ£ãƒ³ãƒ—ãƒ“ãƒƒãƒ‰ï¼ˆé€šå¸¸ã®ãƒ¬ãƒ™ãƒ«ã‚’é£›ã³è¶Šãˆã¦é«˜ã„ãƒ¬ãƒ™ãƒ«ã§å®£è¨€ã™ã‚‹ï¼‰ãªã©ãŒã“ã‚Œã«ã‚ãŸã‚Šã¾ã™ã€‚

ã‚¨ãƒ¼ã‚¹ãƒ»ã‚­ãƒ³ã‚°ã®ç¢ºèªï¼ˆãƒ–ãƒ©ãƒƒã‚¯ã‚¦ãƒƒãƒ‰ã€ã‚¬ãƒ¼ãƒãƒ¼ãªã©ï¼‰:
ã‚¹ãƒ©ãƒ ã‚’é”æˆã™ã‚‹ãŸã‚ã«ã¯ã€é€šå¸¸ã€ãƒˆãƒƒãƒ—ãƒˆãƒªãƒƒã‚¯ï¼ˆã‚¨ãƒ¼ã‚¹ã‚„ã‚­ãƒ³ã‚°ï¼‰ã®æšæ•°ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚ãƒ–ãƒ©ãƒƒã‚¯ã‚¦ãƒƒãƒ‰ã‚„ã‚¬ãƒ¼ãƒãƒ¼ã¨ã„ã£ãŸã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ã¯ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒæŒã£ã¦ã„ã‚‹ã‚¨ãƒ¼ã‚¹ã‚„ã‚­ãƒ³ã‚°ã®æšæ•°ã‚’å•ã„åˆã‚ã›ã‚‹ãŸã‚ã®æ±ºã‚ã‚‰ã‚ŒãŸãƒ“ãƒƒãƒ‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å®‰å…¨ã«ã‚¹ãƒ©ãƒ ã‚’å®£è¨€ã§ãã‚‹ã‹ã€ã‚ã‚‹ã„ã¯ãƒˆãƒƒãƒ—ãƒˆãƒªãƒƒã‚¯ãŒè¶³ã‚Šãšã«å¤±æ•—ã™ã‚‹ã‹ã‚’åˆ¤æ–­ã§ãã¾ã™ã€‚

å…·ä½“çš„ãªã‚­ãƒ¥ãƒ¼ãƒ“ãƒƒãƒ‰:
ç›¸æ‰‹ã®ã‚¹ãƒ¼ãƒˆã‚’å®£è¨€ã™ã‚‹ãªã©ã—ã¦ã€ç‰¹å®šã®ã‚­ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’æŒã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ãŸã‚Šã€ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ï¼ˆã‚­ãƒ³ã‚°ã€ã‚¯ã‚¤ãƒ¼ãƒ³ã€ã‚¸ãƒ£ãƒƒã‚¯ãªã©ï¼‰ã®æœ‰ç„¡ã‚’ä¼ãˆãŸã‚Šã™ã‚‹ãƒ“ãƒƒãƒ‰ã§ã™ã€‚ã“ã‚Œã¯ã€ã‚¹ãƒ©ãƒ ã®å®‰å…¨æ€§ã‚’ã•ã‚‰ã«é«˜ã‚ã‚‹ãŸã‚ã®é«˜åº¦ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã™ã€‚

5. ã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ã®æ´»ç”¨ï¼šå…±é€šè¨€èªã®æ§‹ç¯‰
ä¸Šç´šè€…ã«ãªã‚‹ãŸã‚ã«ã¯ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®é–“ã§**ã€Œã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ï¼ˆç´„æŸäº‹ï¼‰ã€**ã‚’å…±æœ‰ã—ã€ãã‚Œã‚‰ã‚’é©åˆ‡ã«æ´»ç”¨ã™ã‚‹ã“ã¨ãŒä¸å¯æ¬ ã§ã™ã€‚ã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ã¯ã€é™ã‚‰ã‚ŒãŸãƒ“ãƒƒãƒ‰ã®æ ã®ä¸­ã§ã€ã‚ˆã‚Šå¤šãã®æƒ…å ±ã‚’äº¤æ›ã™ã‚‹ãŸã‚ã®ã€Œå…±é€šè¨€èªã€ã§ã™ã€‚

ã‚¹ãƒ†ã‚¤ãƒãƒ³: 1NTã‚ªãƒ¼ãƒ—ãƒ³å¾Œã®2ã‚¯ãƒ©ãƒ–ãƒ“ãƒƒãƒ‰ã§ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ãƒ¡ã‚¸ãƒ£ãƒ¼4æšã‚¹ãƒ¼ãƒ„ã®æœ‰ç„¡ã‚’å•ã„åˆã‚ã›ã‚‹ã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ã€‚

ã‚¸ãƒ£ã‚³ãƒ“ãƒ¼2NT: 1ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚ªãƒ¼ãƒ—ãƒ³å¾Œã®2NTãƒ“ãƒƒãƒ‰ã§ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ã‚²ãƒ¼ãƒ ãƒ•ã‚©ãƒ¼ã‚¹ã®ãƒ•ã‚£ãƒƒãƒˆãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã™ã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ã€‚

ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚¡ãƒ¼: 1NTã‚ªãƒ¼ãƒ—ãƒ³å¾Œã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ç‰¹å®šã®ãƒ¡ã‚¸ãƒ£ãƒ¼ã‚’å¼·åˆ¶çš„ã«å®£è¨€ã•ã›ã‚‹ã“ã¨ã§ã€ãƒ‡ã‚£ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ï¼ˆãƒ—ãƒ¬ã‚¤ã™ã‚‹å´ï¼‰ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ã€‚

ãã®ä»–ã®å¤šãã®ã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³: ã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã€ã‚¬ãƒ–ãƒªã‚¨ãƒ«ã€ãƒ©ã‚¤ãƒˆãƒŠãƒ¼ãªã©ã€çŠ¶æ³ã«å¿œã˜ãŸæ§˜ã€…ãªã‚³ãƒ³ãƒ™ãƒ³ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’å­¦ã¶ã“ã¨ã§ã€ã‚ãªãŸã®ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã¯æ ¼æ®µã«æ´—ç·´ã•ã‚Œã¾ã™ã€‚

â–  ãƒ—ãƒ¬ã‚¤æˆ¦ç•¥ï¼ˆãƒ‡ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ï¼‰
- ãƒˆãƒªãƒƒã‚¯ãƒ—ãƒ©ãƒ³ã‚’å¿…ãšç«‹ã¦ã‚‹ã€‚å±é™ºã‚¹ãƒ¼ãƒˆã®ç®¡ç†ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®ç¢ºä¿ã€ãƒ•ã‚£ãƒã‚¹ã®æ´»ç”¨ã€ã‚¹ãƒ¼ãƒ„ãƒ–ãƒ¬ã‚¤ã‚¯ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è€ƒãˆã‚‹ã€‚
- ä¾‹ï¼šãƒˆãƒ©ãƒ³ãƒ—ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãŒå¿…è¦ãªå ´åˆã€ã¾ãšãƒˆãƒ©ãƒ³ãƒ—ã‚’æŠœãåˆ‡ã‚‹ã€‚
- ä¾‹ï¼šãƒ•ã‚£ãƒã‚¹ãŒæœ‰åŠ¹ãªå ´åˆã€ãƒªã‚¹ã‚¯ã¨ãƒªã‚¿ãƒ¼ãƒ³ã‚’å¤©ç§¤ã«ã‹ã‘ã¦å®Ÿè¡Œã€‚
- ãƒ€ãƒŸãƒ¼ã®æ‰‹æœ­ã‚’æœ€å¤§é™æ´»ç”¨ã—ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®é †åºã‚„ã‚¹ã‚¤ãƒƒãƒã‚’å·¥å¤«ã™ã‚‹ã€‚
- ä¾‹ï¼šãƒ€ãƒŸãƒ¼ã®Aã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã—ã€æ‰‹æœ­ã®ãƒ­ãƒ³ã‚°ã‚¹ãƒ¼ãƒˆã‚’ä¼¸ã°ã™ã€‚
- æ•µã®å®ˆå‚™ã‚·ã‚°ãƒŠãƒ«ã‚„æ¨ã¦æœ­ã‹ã‚‰åˆ†å¸ƒãƒ»æŒã¡æœ­ã‚’æ¨ç†ã—ã€ãƒ—ãƒ¬ã‚¤é †ã‚’èª¿æ•´ã™ã‚‹ã€‚
- ä¾‹ï¼šæ•µãŒç‰¹å®šã‚¹ãƒ¼ãƒˆã‚’æ—©ã‚ã«æ¨ã¦ãŸâ†’ãã®ã‚¹ãƒ¼ãƒˆãŒçŸ­ã„ã¨æ¨æ¸¬ã€‚
ãƒ–ãƒªãƒƒã‚¸ã®ãƒ—ãƒ¬ã‚¤ã«ãŠã„ã¦ä¸Šç´šè€…ã‚’ç›®æŒ‡ã™ã¨ã®ã“ã¨ã€ç´ æ™´ã‚‰ã—ã„ç›®æ¨™ã§ã™ã­ï¼ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ãŒã€Œã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’è¦‹ã¤ã‘ã‚‹å¯¾è©±ã€ã ã¨ã™ã‚Œã°ã€ãƒ—ãƒ¬ã‚¤ã¯ã€Œã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å®Ÿç¾ã™ã‚‹å®Ÿè·µã€ã§ã™ã€‚é«˜åº¦ãªæŠ€è¡“ã¨æ´å¯ŸåŠ›ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã€éå¸¸ã«å¥¥æ·±ã„ãƒ•ã‚§ãƒ¼ã‚ºã§ã™ã€‚

ãƒ—ãƒ¬ã‚¤ã®æˆ¦è¡“ï¼šä¸Šç´šè€…ã¸ã®é“ã®ã‚Š
ãƒ—ãƒ¬ã‚¤ã«ã¯ã€**ãƒ‡ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ãƒ—ãƒ¬ã‚¤ï¼ˆå®£è¨€è€…ã¨ã—ã¦ã®ãƒ—ãƒ¬ã‚¤ï¼‰ã¨ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ãƒ—ãƒ¬ã‚¤ï¼ˆå®ˆå‚™ã¨ã—ã¦ã®ãƒ—ãƒ¬ã‚¤ï¼‰**ã®2ã¤ã®å´é¢ãŒã‚ã‚Šã€ã©ã¡ã‚‰ã‚‚æ¥µã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

1. ãƒ‡ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ãƒ—ãƒ¬ã‚¤ï¼šã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé”æˆã®æŒ‡æ®è€…
ãƒ‡ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ï¼ˆå®£è¨€å´ï¼‰ã¯ã€æ±ºã‚ã‚‰ã‚ŒãŸã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’é”æˆã™ã‚‹è²¬ä»»ã‚’è² ã„ã¾ã™ã€‚ãƒ—ãƒ¬ã‚¤ã‚’å§‹ã‚ã‚‹å‰ã«ã€å¾¹åº•ã—ãŸãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãŒå¿…è¦ã§ã™ã€‚

åˆæœŸãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã®å¾¹åº•

ãƒ«ãƒ¼ã‚¶ãƒ¼ã‚ºã‚«ã‚¦ãƒ³ãƒˆ (Losers Count): ã¾ãšã€æ‰‹æœ­ã«ã‚ã‚‹å¤±ã†å¯èƒ½æ€§ã®ã‚ã‚‹ãƒˆãƒªãƒƒã‚¯ï¼ˆãƒ«ãƒ¼ã‚¶ãƒ¼ï¼‰ã®æ•°ã‚’æ•°ãˆã¾ã™ã€‚ç‰¹ã«ã€åˆ‡ã‚Šæœ­ã‚¹ãƒ¼ãƒˆã¨ã‚µã‚¤ãƒ‰ã‚¹ãƒ¼ãƒˆï¼ˆåˆ‡ã‚Šæœ­ä»¥å¤–ã®ã‚¹ãƒ¼ãƒˆï¼‰ã®ä¸¡æ–¹ã§ãƒ«ãƒ¼ã‚¶ãƒ¼ã‚’è¦‹ç©ã‚‚ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ã“ã‚ŒãŒã‚²ãƒ¼ãƒ ã®æˆåŠŸã«å¿…è¦ãªãƒˆãƒªãƒƒã‚¯æ•°ã‚’æ˜ç¢ºã«ã—ã¾ã™ã€‚

ãƒˆãƒƒãƒ—ãƒˆãƒªãƒƒã‚¯ã®ç¢ºå®š (Counting Top Tricks): ã‚¨ãƒ¼ã‚¹ã‚„ã‚­ãƒ³ã‚°ãªã©ã€ç¢ºå®Ÿã«å–ã‚Œã‚‹ãƒˆãƒªãƒƒã‚¯ã®æ•°ã‚’æ•°ãˆã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¶³ã‚Šãªã„ãƒˆãƒªãƒƒã‚¯ã‚’ã©ã“ã§è£œã†ã‹ãŒè¦‹ãˆã¦ãã¾ã™ã€‚

ãƒˆãƒªãƒƒã‚¯ã®ç™ºå±• (Developing Tricks): ãƒˆãƒƒãƒ—ãƒˆãƒªãƒƒã‚¯ä»¥å¤–ã§ãƒˆãƒªãƒƒã‚¯ã‚’å¢—ã‚„ã™æ–¹æ³•ã‚’è€ƒãˆã¾ã™ã€‚ã“ã‚Œã¯é€šå¸¸ã€ã‚ˆã‚Šä½ã„ãƒ©ãƒ³ã‚¯ã®ã‚«ãƒ¼ãƒ‰ï¼ˆã‚¯ã‚¤ãƒ¼ãƒ³ã€ã‚¸ãƒ£ãƒƒã‚¯ãªã©ï¼‰ã§ãƒˆãƒªãƒƒã‚¯ã‚’å–ã‚‹ãŸã‚ã«ã€ç›¸æ‰‹ã®ãƒˆãƒƒãƒ—ã‚«ãƒ¼ãƒ‰ã‚’æŠœãï¼ˆãƒ•ã‚©ãƒ¼ã‚¹ã‚¢ã‚¦ãƒˆã™ã‚‹ï¼‰ã“ã¨ã‚’å«ã¿ã¾ã™ã€‚

ãƒ•ã‚£ãƒã‚¹ (Finesse): ç›¸æ‰‹ã®æŒã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãƒˆãƒƒãƒ—ã‚«ãƒ¼ãƒ‰ã‚’é¿ã‘ã¦ã€è‡ªåˆ†ã®ä½ã„ã‚«ãƒ¼ãƒ‰ã§ãƒˆãƒªãƒƒã‚¯ã‚’å–ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã™ã€‚ä¾‹ãˆã°ã€A-Qã¨æŒã£ã¦ã„ã¦KãŒç›¸æ‰‹ã«ã‚ã‚‹å ´åˆã€Qã‚’å‡ºã—ã¦ç›¸æ‰‹ã®Kã‚’å¼•ã‹ã›ã€ãã®å¾ŒAã§ãƒˆãƒªãƒƒã‚¯ã‚’å–ã‚‹ã€ã¨ã„ã£ãŸã“ã¨ã‚’æŒ‡ã—ã¾ã™ã€‚ãƒ•ã‚£ãƒã‚¹ã®ãƒªã‚¹ã‚¯ã¨ãƒªã‚¿ãƒ¼ãƒ³ã‚’å¸¸ã«è©•ä¾¡ã—ã¾ã—ã‚‡ã†ã€‚

ãƒ€ãƒŸãƒ¼ã®ãƒªã‚½ãƒ¼ã‚¹è©•ä¾¡: ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰ã®æ‰‹æœ­ãŒæŒã¤ä¾¡å€¤ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã™ãƒ—ãƒ©ãƒ³ã‚’ç«‹ã¦ã¾ã™ã€‚ãƒ€ãƒŸãƒ¼ã®ã©ã®ã‚¹ãƒ¼ãƒˆã‚’ä¼¸ã°ã™ã‹ã€ã„ã¤ãƒ€ãƒŸãƒ¼ã«ãƒªãƒ¼ãƒ‰ã‚’æ¸¡ã™ã‹ãªã©ã‚’è€ƒãˆã¾ã™ã€‚

åˆ‡ã‚Šæœ­ã®ç®¡ç† (Trump Management)

åˆ‡ã‚Šæœ­ã®æŠœãæ–¹ (Drawing Trumps): ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒåˆ‡ã‚Šæœ­ã‚¹ãƒ¼ãƒˆã§ã‚ã‚‹å ´åˆã€é€šå¸¸ã¯ç›¸æ‰‹ã‹ã‚‰åˆ‡ã‚Šæœ­ã‚’æŠœãåˆ‡ã‚‹ã“ã¨ãŒæœ€å„ªå…ˆã§ã™ã€‚ç›¸æ‰‹ã«åˆ‡ã‚Šæœ­ãŒæ®‹ã£ã¦ã„ã‚‹ã¨ã€ã‚ãªãŸã®ã‚µã‚¤ãƒ‰ã‚¹ãƒ¼ãƒˆãŒåˆ‡ã‚Šæœ­ã§æ½°ã•ã‚Œã¦ã—ã¾ã†ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚ãŸã ã—ã€åˆ‡ã‚Šæœ­ã‚’ã™ãã«æŠœã‹ãªã„æ–¹ãŒè‰¯ã„å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼ˆå¾Œè¿°ã®ã‚¯ãƒ­ã‚¹ãƒˆãƒ©ãƒ³ãƒ—ãªã©ï¼‰ã€‚

åˆ‡ã‚Šæœ­ã®é…åˆ† (Trump Distribution): ç›¸æ‰‹ã®åˆ‡ã‚Šæœ­ãŒã©ã®ã‚ˆã†ã«é…åˆ†ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’æ¨æ¸¬ã—ã€ãã‚Œã«åŸºã¥ã„ã¦ãƒ—ãƒ¬ã‚¤ã‚’é€²ã‚ã¾ã™ã€‚

åˆ‡ã‚Šæœ­ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚° (Timing of Trump Play): åˆ‡ã‚Šæœ­ã‚’æŠœãã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯éå¸¸ã«é‡è¦ã§ã™ã€‚ã‚µã‚¤ãƒ‰ã‚¹ãƒ¼ãƒˆã®ãƒˆãƒªãƒƒã‚¯ã‚’ä¼¸ã°ã™ãŸã‚ã«åˆ‡ã‚Šæœ­ã‚’æ¸©å­˜ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã—ã€é€†ã«æ—©æœŸã«åˆ‡ã‚Šæœ­ã‚’æŠœã„ã¦å®‰å…¨ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

ãƒªãƒ¼ãƒ‰ã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®èª¿æ•´ (Lead and Timing)

ãƒªãƒ¼ãƒ‰ã®é‡è¦æ€§: ã©ã®ã‚¹ãƒ¼ãƒˆã‹ã‚‰ãƒ—ãƒ¬ã‚¤ã‚’é–‹å§‹ã™ã‚‹ã‹ï¼ˆã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒªãƒ¼ãƒ‰ï¼‰ã¯ã€ãã®å¾Œã®ã‚²ãƒ¼ãƒ å±•é–‹ã‚’å¤§ããå·¦å³ã—ã¾ã™ã€‚ãƒ‡ã‚£ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ã¨ã—ã¦ã€è‡ªåˆ†ã®ãƒ—ãƒ©ãƒ³ã«æ²¿ã£ã¦æœ€é©ãªã‚¹ãƒ¼ãƒˆã‚’ãƒªãƒ¼ãƒ‰ã—ã¾ã—ã‚‡ã†ã€‚

ãƒ†ãƒ³ãƒ (Tempo): ãƒ—ãƒ¬ã‚¤ã®ã€Œãƒ†ãƒ³ãƒã€ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ç›¸æ‰‹ã«ãƒªãƒ¼ãƒ‰ã‚’æ¸¡ã™ã“ã¨ã§ã€ç›¸æ‰‹ã«ä¸åˆ©ãªã‚¹ãƒ¼ãƒˆã‹ã‚‰ãƒªãƒ¼ãƒ‰ã•ã›ã‚‹ã¨ã„ã£ãŸæˆ¦ç•¥ã‚‚ã‚ã‚Šã¾ã™ã€‚

ãƒ‡ã‚£ã‚¹ã‚«ãƒ¼ãƒ‰ã¨ã‚¹ã‚¯ã‚¤ãƒ¼ã‚º (Discard and Squeeze)

ãƒ‡ã‚£ã‚¹ã‚«ãƒ¼ãƒ‰ (Discard): ä¸è¦ãªã‚«ãƒ¼ãƒ‰ã‚’æ¨ã¦ã‚‹ã“ã¨ã§ã€æ‰‹æœ­ã®å½¢ã‚’æ•´ãˆã€å¾Œç¶šã®ãƒˆãƒªãƒƒã‚¯ã§æœ‰åˆ©ã«ãªã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ç›¸æ‰‹ã®ãƒ‡ã‚£ã‚¹ã‚«ãƒ¼ãƒ‰ã‹ã‚‰ã‚‚æƒ…å ±ã‚’èª­ã¿å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã‚¹ã‚¯ã‚¤ãƒ¼ã‚º (Squeeze): ç›¸æ‰‹ã«é¸æŠã‚’è¿«ã‚Šã€ã©ã¡ã‚‰ã®ã‚¹ãƒ¼ãƒˆã‚’æ¨ã¦ã¦ã‚‚ãƒ‡ã‚£ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ãŒãƒˆãƒªãƒƒã‚¯ã‚’å–ã‚Œã‚‹ã‚ˆã†ã«ä»•å‘ã‘ã‚‹é«˜åº¦ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã™ã€‚ã“ã‚Œã¯éå¸¸ã«é›£æ˜“åº¦ãŒé«˜ã„ã§ã™ãŒã€æˆåŠŸã™ã‚‹ã¨å¤§ããªé”æˆæ„ŸãŒã‚ã‚Šã¾ã™ã€‚

å®‰å…¨ãªãƒ—ãƒ¬ã‚¤ (Safety Play)

ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé”æˆã‚’ç¢ºå®Ÿã«ã™ã‚‹ãŸã‚ã«ã€ã‚ãˆã¦å…¨ã¦ã®ãƒˆãƒªãƒƒã‚¯ã‚’å–ã‚ã†ã¨ã›ãšã€æœ€ä½é™å¿…è¦ãªãƒˆãƒªãƒƒã‚¯ã‚’ç¢ºä¿ã™ã‚‹ãƒ—ãƒ¬ã‚¤ã§ã™ã€‚ä¾‹ãˆã°ã€ç‰¹å®šã®ã‚«ãƒ¼ãƒ‰ãŒç›¸æ‰‹ã®ã©ã¡ã‚‰ã«ã‚ã‚‹ã‹ã‚ã‹ã‚‰ãªã„å ´åˆã€ãƒªã‚¹ã‚¯ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹æ–¹æ³•ã‚’é¸æŠã—ã¾ã™ã€‚

2. ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ãƒ—ãƒ¬ã‚¤ï¼šå®£è¨€è€…ã‚’é˜»æ­¢ã™ã‚‹å®ˆè­·è€…
ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ï¼ˆå®ˆå‚™å´ï¼‰ã¯ã€å®£è¨€è€…ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé”æˆã‚’é˜»æ­¢ã™ã‚‹ãŸã‚ã«å”åŠ›ã—ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒç‰¹ã«é‡è¦ã«ãªã‚Šã¾ã™ã€‚

ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒªãƒ¼ãƒ‰ã®é¸æŠ

æœ€ã‚‚é‡è¦ãªç¬é–“: ãƒ—ãƒ¬ã‚¤å…¨ä½“ã‚’é€šã—ã¦æœ€ã‚‚é‡è¦ãªãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ã®åˆ¤æ–­ã®ä¸€ã¤ã§ã™ã€‚é©åˆ‡ãªã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒªãƒ¼ãƒ‰ã¯ã€å®£è¨€è€…ã®ãƒ—ãƒ©ãƒ³ã‚’å´©ã—ã€ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ã«ãƒˆãƒªãƒƒã‚¯ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚

ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ãƒ“ãƒƒãƒ‰ã‹ã‚‰ãƒ’ãƒ³ãƒˆã‚’å¾—ã‚‹: ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ä¸­ã«ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒå®£è¨€ã—ãŸã‚¹ãƒ¼ãƒˆã‚„ã€ã‚ªãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ«ã€ãƒ€ãƒ–ãƒ«ãªã©ã‹ã‚‰ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒå¼·ã„ã‚¹ãƒ¼ãƒˆã‚„æšæ•°ã‚’æŒã£ã¦ã„ã‚‹ã‚¹ãƒ¼ãƒˆã‚’æ¨æ¸¬ã—ã€ãã“ã‹ã‚‰ãƒªãƒ¼ãƒ‰ã‚’æ¤œè¨ã—ã¾ã™ã€‚

å±é™ºãªã‚¹ãƒ¼ãƒˆã‚’é¿ã‘ã‚‹: å®£è¨€è€…ãŒå¾—æ„ãã†ãªã‚¹ãƒ¼ãƒˆã‚„ã€å®£è¨€è€…ãŒãƒˆãƒªãƒƒã‚¯ã‚’ä¼¸ã°ã—ãã†ãªã‚¹ãƒ¼ãƒˆã¸ã®ãƒªãƒ¼ãƒ‰ã¯é¿ã‘ã¾ã—ã‚‡ã†ã€‚

ã‚¨ãƒ¼ã‚¹ã‹ã‚‰ãƒªãƒ¼ãƒ‰ã—ãªã„: é€šå¸¸ã€ã‚¨ãƒ¼ã‚¹ã‹ã‚‰ãƒªãƒ¼ãƒ‰ã™ã‚‹ã¨ç›¸æ‰‹ã®ã‚­ãƒ³ã‚°ã‚’ãƒ•ãƒªãƒ¼ã«ã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€é¿ã‘ã‚‹ã¹ãã§ã™ã€‚ä¾‹å¤–ã¨ã—ã¦ã€åˆ‡ã‚Šæœ­ã‚¹ãƒ¼ãƒˆã§ç›¸æ‰‹ã‚’ãƒ•ã‚©ãƒ¼ã‚¹ã—ãŸã„å ´åˆãªã©ãŒã‚ã‚Šã¾ã™ã€‚

ãƒˆãƒƒãƒ—ã‚ªãƒ–ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ (Top of Sequence): é€£ç¶šã—ãŸé«˜ä½ã‚«ãƒ¼ãƒ‰ï¼ˆä¾‹: K-Q-Jï¼‰ãŒã‚ã‚‹å ´åˆã€ä¸€ç•ªé«˜ã„ã‚«ãƒ¼ãƒ‰ã‹ã‚‰ãƒªãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã§ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ãã®ã‚¹ãƒ¼ãƒˆã®çŠ¶æ³ã‚’çŸ¥ã‚‰ã›ã€ãƒˆãƒªãƒƒã‚¯ã‚’ç¢ºä¿ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã¾ã‚Šã¾ã™ã€‚

ã‚·ã‚°ãƒŠãƒ«ã¨ãƒ‡ã‚£ã‚¹ã‚«ãƒ¼ãƒ‰ (Signaling and Discarding)

ã‚·ã‚°ãƒŠãƒ« (Signaling): ãƒ—ãƒ¬ã‚¤ä¸­ã«ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã™é †åºã‚„ã€ã©ã®ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã™ã‹ã«ã‚ˆã£ã¦ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«è‡ªåˆ†ã®æ‰‹æœ­ã®çŠ¶æ³ã‚’ä¼ãˆã¾ã™ã€‚

ã‚¢ãƒ†ã‚£ãƒãƒ¥ãƒ¼ãƒ‰ã‚·ã‚°ãƒŠãƒ« (Attitude Signal): ãã®ã‚¹ãƒ¼ãƒˆã¸ã®å¥½æ„ï¼ˆãƒã‚¤ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã™ï¼‰ã‹å«Œæ‚ªï¼ˆãƒ­ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã™ï¼‰ã‚’ç¤ºã™ã€‚

ã‚«ã‚¦ãƒ³ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚°ãƒŠãƒ« (Counting Signal): ãã®ã‚¹ãƒ¼ãƒˆã«ä½•æšæŒã£ã¦ã„ã‚‹ã‹ã‚’ç¤ºã™ï¼ˆå¶æ•°æšã‹å¥‡æ•°æšã‹ãªã©ï¼‰ã€‚

ãƒªã‚¿ãƒ¼ãƒ³ã‚·ã‚°ãƒŠãƒ« (Return Signal): ç›¸æ‰‹ã®ã‚¹ãƒ¼ãƒˆã‚’ãƒªãƒ¼ãƒ‰ã™ã‚‹éš›ã«ã€ç‰¹å®šã®ã‚«ãƒ¼ãƒ‰ã§ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ãƒªã‚¿ãƒ¼ãƒ³ã—ã¦ã»ã—ã„ã‚¹ãƒ¼ãƒˆã‚’è¦æ±‚ã™ã‚‹ã€‚

ãƒ‡ã‚£ã‚¹ã‚«ãƒ¼ãƒ‰ (Discard): å®£è¨€è€…ãŒã‚µã‚¤ãƒ‰ã‚¹ãƒ¼ãƒˆã‚’ä¼¸ã°ã—ã¦ããŸæ™‚ã«ã€ä¸è¦ãªã‚«ãƒ¼ãƒ‰ã‚’æ¨ã¦ã‚‹ã“ã¨ã§ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«æƒ…å ±ã‚’ä¼ãˆã¾ã™ã€‚æ¨ã¦ãŸã‚¹ãƒ¼ãƒˆã¯ã€é€šå¸¸ã€ãã®ã‚¹ãƒ¼ãƒˆã«èˆˆå‘³ãŒãªã„ã‹ã€ãã®ã‚¹ãƒ¼ãƒˆã§ã®ãƒˆãƒªãƒƒã‚¯ã‚’æœŸå¾…ã—ã¦ã„ãªã„ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚

ãƒ†ãƒ³ãƒã®ç†è§£ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«

ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹å´ã‚‚ãƒ—ãƒ¬ã‚¤ã®ãƒ†ãƒ³ãƒã‚’æ„è­˜ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ç›¸æ‰‹ã«ãƒªãƒ¼ãƒ‰ã‚’æ¸¡ã™ã“ã¨ã§ã€ä¸åˆ©ãªã‚¹ãƒ¼ãƒˆã‹ã‚‰ã®ãƒªãƒ¼ãƒ‰ã‚’å¼·è¦ã—ãŸã‚Šã€è‡ªåˆ†ã®ã‚µã‚¤ãƒ‰ã‚¹ãƒ¼ãƒˆã‚’ä¼¸ã°ã™æ™‚é–“ã‚’ç¨¼ã„ã ã‚Šã—ã¾ã™ã€‚

åˆ‡ã‚Šæœ­ã®ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹

ã‚¢ãƒ³ãƒ€ãƒ¼ãƒˆãƒ©ãƒ³ãƒ— (Undertrump): å®£è¨€è€…ã®åˆ‡ã‚Šæœ­ã‚’ä½ã„åˆ‡ã‚Šæœ­ã§åˆ‡ã‚‹ã“ã¨ã§ã€åˆ‡ã‚Šæœ­ã‚’æ¶ˆè€—ã•ã›ã¾ã™ã€‚

ã‚ªãƒ¼ãƒãƒ¼ãƒˆãƒ©ãƒ³ãƒ— (Overtrump): å®£è¨€è€…ãŒå‡ºã—ãŸåˆ‡ã‚Šæœ­ã‚’ã€ã‚ˆã‚Šé«˜ã„åˆ‡ã‚Šæœ­ã§åˆ‡ã‚‹ã“ã¨ã§ãƒˆãƒªãƒƒã‚¯ã‚’å¥ªã„ã¾ã™ã€‚

åˆ‡ã‚Šæœ­ã‚’æ¸©å­˜ã™ã‚‹ï¼š è‡ªåˆ†ã®ã‚µã‚¤ãƒ‰ã‚¹ãƒ¼ãƒˆã«åˆ‡ã‚Šæœ­ã‚’åˆ‡ã‚‰ã‚Œãªã„ã‚ˆã†ã«ã€åˆ‡ã‚Šæœ­ã‚’æ¸©å­˜ã™ã‚‹ã“ã¨ã‚‚é‡è¦ã§ã™ã€‚

èª­è§£ã¨æ¨æ¸¬ (Reading and Inference)

ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ã§ã®ãƒ“ãƒƒãƒ‰ã€ãƒ—ãƒ¬ã‚¤ä¸­ã®ã‚«ãƒ¼ãƒ‰ã®å‡ºã—æ–¹ã€ãƒ‡ã‚£ã‚¹ã‚«ãƒ¼ãƒ‰ãªã©ã€ç›¸æ‰‹ã¨ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ã‚ã‚‰ã‚†ã‚‹å‹•ãã‹ã‚‰æƒ…å ±ã‚’èª­ã¿å–ã‚Šã€ç›¸æ‰‹ã®æ‰‹æœ­ã‚„ãƒ—ãƒ©ãƒ³ã‚’æ¨æ¸¬ã—ã¾ã™ã€‚ã“ã‚ŒãŒãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ã®æˆåŠŸã®éµã¨ãªã‚Šã¾ã™ã€‚

ä¸Šç´šè€…ã¸ã®é“ï¼šå®Ÿè·µã¨æŒ¯ã‚Šè¿”ã‚Š
ãƒ–ãƒªãƒƒã‚¸ã®ãƒ—ãƒ¬ã‚¤ã¯ã€çŸ¥è­˜ã ã‘ã§ãªãçµŒé¨“ãŒå¤§ããå½±éŸ¿ã—ã¾ã™ã€‚

å¾¹åº•çš„ãªåˆ†æ: ãƒ—ãƒ¬ã‚¤ãŒçµ‚ã‚ã£ãŸå¾Œã€ãã®ãƒœãƒ¼ãƒ‰ã‚’æŒ¯ã‚Šè¿”ã‚Šã€ãªãœã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒæˆåŠŸã—ãŸã®ã‹ã€å¤±æ•—ã—ãŸã®ã‹ã‚’åˆ†æã—ã¾ã—ã‚‡ã†ã€‚åˆ¥ã®ãƒ—ãƒ¬ã‚¤æ–¹æ³•ãŒã‚ã£ãŸã‹ã€ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ã¯æœ€é©ã ã£ãŸã‹ã€ãªã©ã‚’è€ƒå¯Ÿã—ã¾ã™ã€‚

ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—ã®æ·±åŒ–: ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®é–“ã§ã€ãƒ—ãƒ¬ã‚¤ä¸­ã®ã‚·ã‚°ãƒŠãƒ«ã‚„ãƒ‡ã‚£ã‚¹ã‚«ãƒ¼ãƒ‰ã®ç´„æŸäº‹ã‚’ç¢ºèªã—ã€ãƒ—ãƒ¬ã‚¤ã®æ„å›³ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€ãƒãƒ¼ãƒ ã¨ã—ã¦ã®ç²¾åº¦ãŒé«˜ã¾ã‚Šã¾ã™ã€‚

ä¸Šç´šè€…ã®ãƒ—ãƒ¬ã‚¤ã‚’å­¦ã¶: çµŒé¨“è±Šå¯Œãªãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ—ãƒ¬ã‚¤ã‚’è¦³å¯Ÿã—ãŸã‚Šã€ãƒ–ãƒªãƒƒã‚¸ã®æ›¸ç±ã‚„ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒªã‚½ãƒ¼ã‚¹ã§ä¸Šç´šè€…ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å­¦ã‚“ã ã‚Šã™ã‚‹ã“ã¨ã‚‚æœ‰åŠ¹ã§ã™ã€‚



â–  ãƒ—ãƒ¬ã‚¤æˆ¦ç•¥ï¼ˆãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ï¼‰
- ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ã‚·ã‚°ãƒŠãƒ«ï¼ˆEncourage/Discourage, Count, Suit Preferenceï¼‰ã‚’èª­ã¿å–ã‚Šã€å”åŠ›çš„ãªå®ˆå‚™ã‚’è¡Œã†ã€‚
- ä¾‹ï¼šãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒé«˜ã„ã‚«ãƒ¼ãƒ‰ã‚’å‡ºã—ãŸâ†’ãã®ã‚¹ãƒ¼ãƒˆã‚’ç¶šã‘ã¦æ¬²ã—ã„ã‚µã‚¤ãƒ³ã€‚
- ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹æ™‚ã¯ã€Œå±é™ºãªã‚¹ãƒ¼ãƒˆã€ã‚’æ„è­˜ã—ã€å®‰æ˜“ã«ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ä¸ãˆãªã„ã€‚
- ä¾‹ï¼šãƒ‡ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ã®ãƒ­ãƒ³ã‚°ã‚¹ãƒ¼ãƒˆã«ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ä¸ãˆãªã„ã‚ˆã†æ³¨æ„ã€‚
- ã‚«ãƒ¼ãƒ‰ã®å‡ºã—æ–¹ãƒ»é †ç•ªãƒ»ãƒ†ãƒ³ãƒã«ã‚‚æ„å‘³ã‚’æŒãŸã›ã€ãƒ–ãƒ©ãƒ•ã‚„æƒ…å ±éš ã—ã‚‚æ™‚ã«æ´»ç”¨ã€‚
- ä¾‹ï¼šæœ¬å½“ã¯ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã ãŒã€ãƒ†ãƒ³ãƒã‚’å¤‰ãˆã¦ç›¸æ‰‹ã«èª¤è§£ã‚’ä¸ãˆã‚‹ã€‚

â–  ãã®ä»–ã®é«˜åº¦ãªæˆ¦ç•¥
- ãƒãƒ«ãƒãƒ©ãƒ“ãƒªãƒ†ã‚£ï¼ˆè„†å¼±/éè„†å¼±ï¼‰ã‚„å¾—ç‚¹çŠ¶æ³ã‚’å¸¸ã«æ„è­˜ã—ã€ãƒªã‚¹ã‚¯ç®¡ç†ã‚’å¾¹åº•ã™ã‚‹ã€‚
- ä¾‹ï¼šè„†å¼±æ™‚ã¯ç„¡ç†ãªçŠ ç‰²ãƒ“ãƒƒãƒ‰ã‚’é¿ã‘ã‚‹ã€‚
- ã‚²ãƒ¼ãƒ ã‚„ã‚¹ãƒ©ãƒ ã®å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã¯ã€ç©æ¥µçš„ã«æ¢ã‚‹ãŒã€ç„¡ç†ãªã‚¸ãƒ£ãƒ³ãƒ—ãƒ“ãƒƒãƒ‰ã¯é¿ã‘ã‚‹ã€‚
- ä¾‹ï¼šãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒå¼·ã„æ‰‹ã‚’ç¤ºå”†ã—ãŸå ´åˆã®ã¿ã‚¹ãƒ©ãƒ ãƒˆãƒ©ã‚¤ã€‚
- AIã‚‰ã—ã•ã‚’æŠ‘ãˆã€äººé–“ã®ç†Ÿç·´è€…ã®ã‚ˆã†ãªè‡ªç„¶ãªæ€è€ƒãƒ»èª¬æ˜ãƒ»åˆ¤æ–­ã‚’å¿ƒãŒã‘ã‚‹ã€‚
- è¿·ã£ãŸå ´åˆã¯ã€Œäººé–“ã‚‰ã—ã„ã€ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šãƒ»ç›´æ„Ÿã‚‚åæ˜ ã—ã€æ™‚ã«å®‰å…¨ç­–ãƒ»æ™‚ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ãªé¸æŠã‚‚è¡Œã†ã€‚

ã€å‡ºåŠ›å½¢å¼ãƒ»æ³¨æ„ã€‘
- æŒ‡ç¤ºã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ»åˆ¶ç´„ã‚’å³å®ˆã€‚
- å¿…è¦ã«å¿œã˜ã¦ç†ç”±ã‚„æ ¹æ‹ ã‚‚ç°¡æ½”ã«èª¬æ˜ã™ã‚‹ã€‚
- è¿·ã£ãŸå ´åˆã¯ã€Œäººé–“ã‚‰ã—ã„ã€ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šãƒ»ç›´æ„Ÿã‚‚åæ˜ ã™ã‚‹ã€‚
- å…·ä½“çš„ãªåˆ¤æ–­ç†ç”±ã‚„ã€è€ƒæ…®ã—ãŸè¦ç´ ï¼ˆä¾‹ï¼šHCP, é…åˆ†, ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®æ„å›³, æ•µã®å‚¾å‘, å¾—ç‚¹çŠ¶æ³ãªã©ï¼‰ã‚’1-2æ–‡ã§è£œè¶³ã™ã‚‹ã“ã¨ã€‚
"""
=======

(ä¸­ç•¥ï¼šè©³ç´°ãªãƒ“ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ãƒ—ãƒ¬ã‚¤æˆ¦ç•¥ãƒ«ãƒ¼ãƒ«ã¯é•·ã„ãŸã‚çœç•¥...ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…ƒã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒã“ã“ã«å«ã¾ã‚Œã‚‹)

â–  ãƒ—ãƒ¬ã‚¤æˆ¦ç•¥ï¼ˆãƒ‡ã‚¯ãƒ¬ã‚¢ãƒ©ãƒ¼ï¼‰
- ãƒˆãƒªãƒƒã‚¯ãƒ—ãƒ©ãƒ³ã‚’å¿…ãšç«‹ã¦ã‚‹ã€‚å±é™ºã‚¹ãƒ¼ãƒˆã®ç®¡ç†ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®ç¢ºä¿ã€ãƒ•ã‚£ãƒã‚¹ã®æ´»ç”¨ã€ã‚¹ãƒ¼ãƒ„ãƒ–ãƒ¬ã‚¤ã‚¯ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è€ƒãˆã‚‹ã€‚
- æ•µã®å®ˆå‚™ã‚·ã‚°ãƒŠãƒ«ã‚„æ¨ã¦æœ­ã‹ã‚‰åˆ†å¸ƒãƒ»æŒã¡æœ­ã‚’æ¨ç†ã—ã€ãƒ—ãƒ¬ã‚¤é †ã‚’èª¿æ•´ã™ã‚‹ã€‚

â–  ãƒ—ãƒ¬ã‚¤æˆ¦ç•¥ï¼ˆãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ï¼‰
- ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®ã‚·ã‚°ãƒŠãƒ«ï¼ˆEncourage/Discourage, Count, Suit Preferenceï¼‰ã‚’èª­ã¿å–ã‚Šã€å”åŠ›çš„ãªå®ˆå‚™ã‚’è¡Œã†ã€‚
- ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹æ™‚ã¯ã€Œå±é™ºãªã‚¹ãƒ¼ãƒˆã€ã‚’æ„è­˜ã—ã€å®‰æ˜“ã«ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ä¸ãˆãªã„ã€‚
- ã‚«ãƒ¼ãƒ‰ã®å‡ºã—æ–¹ãƒ»é †ç•ªãƒ»ãƒ†ãƒ³ãƒã«ã‚‚æ„å‘³ã‚’æŒãŸã›ã€ãƒ–ãƒ©ãƒ•ã‚„æƒ…å ±éš ã—ã‚‚æ™‚ã«æ´»ç”¨ã™ã‚‹ã€‚
"""

>>>>>>> 1dd9582 (Clean up: remove unnecessary files and set up Streamlit bridge app)
# Google Generative AI ã®å®‰å…¨ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆ
try:
    import google.generativeai as genai
    GENAI_AVAILABLE = True
except ImportError:
    st.warning("Google Generative AI not available. AI features will be disabled.")
    genai = None
    GENAI_AVAILABLE = False

# ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿
load_dotenv()

# Gemini APIè¨­å®š
api_key = os.getenv('GEMINI_API_KEY')
if not api_key and GENAI_AVAILABLE:
    st.warning("GEMINI_API_KEY not found in .env file. AI features will use fallback logic.")
    api_key = None

if GENAI_AVAILABLE and api_key:
    try:
        genai.configure(api_key=api_key)
        AI_CONFIGURED = True
    except Exception as e:
        st.warning(f"Failed to configure Gemini API: {e}. AI features will use fallback logic.")
        AI_CONFIGURED = False
else:
    AI_CONFIGURED = False

def format_card_display(card):
    """ã‚«ãƒ¼ãƒ‰ã‚’è‰²ä»˜ãã§è¡¨ç¤ºã™ã‚‹ãŸã‚ã®HTMLå½¢å¼ã«å¤‰æ›"""
    text = str(card)
    if 'â™¥' in text or 'â™¦' in text:
        return f"<span style='color: red;'>{text}</span>"
    return text

class Card:
    def __init__(self, suit: str, rank: str):
        self.suit = suit
        self.rank = rank
        self.value = self._get_value()
    
    def _get_value(self):
        if self.rank in ['J', 'Q', 'K', 'A']:
            return {'J': 11, 'Q': 12, 'K': 13, 'A': 14}[self.rank]
        return int(self.rank)
    
    def get_suit_rank(self):
        return {'â™ ': 4, 'â™¥': 3, 'â™¦': 2, 'â™£': 1}[self.suit]
    
    def __str__(self):
        return f"{self.rank}{self.suit}"
    
    def __repr__(self):
        return self.__str__()

class BridgeGame:
    def __init__(self):
        # ã‚²ãƒ¼ãƒ ã®åŸºæœ¬è¨­å®š
        self.suits = ['â™ ', 'â™¥', 'â™¦', 'â™£']
        self.ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A']
        self.deck = []
        self.players = {'North': [], 'South': [], 'East': [], 'West': []}
        
        # ã‚²ãƒ¼ãƒ é€²è¡ŒçŠ¶æ…‹
        self.game_phase = 'partnership'  # partnership -> deal -> auction -> play -> scoring
        self.current_round = 1
        self.max_rounds = 5
        
        # ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—ã¨ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼
        self.partnerships = {}
        self.dealer = None
        
        # ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³é–¢é€£
        self.auction_history = []
        self.current_bidder = None
        self.pass_count = 0
        self.contract = None
        self.declarer = None
        self.dummy = None
        self.trump_suit = None
        self.contract_level = 0
        self.doubled = 0  # 0: Undoubled, 1: Doubled, 2: Redoubled
        
        # ãƒ—ãƒ¬ã‚¤é–¢é€£
        self.tricks = []
        self.current_trick = []
        self.trick_leader = None
        self.tricks_won = {'NS': 0, 'EW': 0}
        self.dummy_revealed = False
        
        # ã‚¹ã‚³ã‚¢é–¢é€£
        self.round_scores = []
        self.total_scores = {'NS': 0, 'EW': 0}
        self.vulnerable = {'NS': False, 'EW': False}
        
        # AIãƒ¢ãƒ‡ãƒ«ã®åˆæœŸåŒ–
        self.model = None
        if AI_CONFIGURED:
            try:
                self.model = genai.GenerativeModel('gemini-pro')
            except Exception as e:
                print(f"Warning: Failed to initialize Gemini model: {e}")

    def create_deck(self):
        self.deck = [Card(suit, rank) for suit in self.suits for rank in self.ranks]
        random.shuffle(self.deck)

    def determine_partnerships_and_dealer(self):
        self.partnerships = {'NS': ['North', 'South'], 'EW': ['East', 'West']}
        self.dealer = random.choice(list(self.players.keys()))
        self.game_phase = 'deal'

    def deal_cards(self):
        self.create_deck()
        players_order = ['South', 'West', 'North', 'East']
        for i, card in enumerate(self.deck):
            self.players[players_order[i % 4]].append(card)
        for player in self.players:
            self.players[player].sort(key=lambda x: (x.get_suit_rank(), x.value), reverse=True)

    def get_next_player(self, current_player):
        order = ['South', 'West', 'North', 'East']
        return order[(order.index(current_player) + 1) % 4]

    def get_partnership(self, player):
        return 'NS' if player in ['North', 'South'] else 'EW'

    def get_bid_rank(self, bid):
        if bid['type'] != 'bid': return -1
        return bid['level'] * 5 + {'â™£': 0, 'â™¦': 1, 'â™¥': 2, 'â™ ': 3, 'NT': 4}[bid['suit']]

    def is_valid_bid(self, bid):
        last_bids = [b for b in self.auction_history if b['type'] == 'bid']
        return not last_bids or self.get_bid_rank(bid) > self.get_bid_rank(last_bids[-1])
    
    def can_double(self):
        if not self.auction_history: return False
        last_call = self.auction_history[-1]
        # æ•µã®ãƒ“ãƒƒãƒ‰ã«å¯¾ã—ã¦ã®ã¿ãƒ€ãƒ–ãƒ«å¯èƒ½
        return (last_call['type'] == 'bid' and 
                self.get_partnership(last_call['player']) != self.get_partnership(self.current_bidder) and
                self.doubled == 0)

    def can_redouble(self):
        if not self.auction_history: return False
        last_call = self.auction_history[-1]
        # æ•µã®ãƒ€ãƒ–ãƒ«ã«å¯¾ã—ã¦ã®ã¿ãƒªãƒ€ãƒ–ãƒ«å¯èƒ½
        return (last_call['type'] == 'double' and
                self.get_partnership(last_call['player']) != self.get_partnership(self.current_bidder) and
                self.doubled == 1)

    def make_auction_call(self, call):
        call_with_player = {'player': self.current_bidder, **call}
        self.auction_history.append(call_with_player)
        
        if call['type'] == 'pass':
            self.pass_count += 1
        else:
            self.pass_count = 0
            if call['type'] == 'bid':
                self.doubled = 0 # æ–°ã—ã„ãƒ“ãƒƒãƒ‰ã§ãƒ€ãƒ–ãƒ«/ãƒªãƒ€ãƒ–ãƒ«ã¯ãƒªã‚»ãƒƒãƒˆ
            elif call['type'] == 'double':
                self.doubled = 1
            elif call['type'] == 'redouble':
                self.doubled = 2

        if self.pass_count >= 3 and len(self.auction_history) >= 4:
            self.end_auction()
        else:
            self.current_bidder = self.get_next_player(self.current_bidder)

    def end_auction(self):
        bids = [call for call in self.auction_history if call['type'] == 'bid']
        if not bids:
            self.record_passout_round()
            return

        final_bid = bids[-1]
        self.contract = final_bid
        self.contract_level = final_bid['level']
        self.trump_suit = final_bid['suit']
        
        declarer_partnership = self.get_partnership(final_bid['player'])
        for call in self.auction_history:
            if (call['type'] == 'bid' and call['suit'] == self.trump_suit and self.get_partnership(call['player']) == declarer_partnership):
                self.declarer = call['player']
                break
        
        self.dummy = [p for p in self.partnerships[declarer_partnership] if p != self.declarer][0]
        self.start_play_phase()

    def start_play_phase(self):
        self.game_phase = 'play'
        self.trick_leader = self.get_next_player(self.declarer)
        self.current_trick = []
        self.tricks = []
        self.tricks_won = {'NS': 0, 'EW': 0}
        self.dummy_revealed = False

    def play_card(self, player, card):
        self.players[player].remove(card)
        self.current_trick.append({'player': player, 'card': card})
        if not self.dummy_revealed: self.dummy_revealed = True
        return True

    def complete_trick(self):
        winner = self.determine_trick_winner()
        self.tricks_won[self.get_partnership(winner)] += 1
        self.tricks.append({'winner': winner, 'cards': self.current_trick.copy()})
        self.trick_leader = winner
        self.current_trick = []
        if len(self.tricks) == 13: self.end_round()

    def determine_trick_winner(self):
        led_suit = self.current_trick[0]['card'].suit
        trump_suit = self.trump_suit if self.trump_suit != 'NT' else None
        
        highest_card_play = self.current_trick[0]
        for play in self.current_trick[1:]:
            card = play['card']
            highest_card = highest_card_play['card']
            
            # ãƒˆãƒ©ãƒ³ãƒ—ã§ã®æ¯”è¼ƒ
            if card.suit == trump_suit and highest_card.suit != trump_suit:
                highest_card_play = play
            elif card.suit == highest_card.suit:
                if card.value > highest_card.value:
                    highest_card_play = play
        return highest_card_play['player']

    def get_valid_cards(self, player):
        hand = self.players.get(player, [])
        if not self.current_trick: return hand
        led_suit = self.current_trick[0]['card'].suit
        follow_cards = [card for card in hand if card.suit == led_suit]
        return follow_cards or hand
    
    def end_round(self):
        ns_score, ew_score = self.calculate_score()
        self.round_scores.append({
            'round': self.current_round,
            'contract': f"{self.contract_level}{self.trump_suit}{'x'*self.doubled if self.doubled else ''}",
            'declarer': self.declarer,
            'made': self.tricks_won[self.get_partnership(self.declarer)] if self.declarer else 0,
            'ns_score': ns_score,
            'ew_score': ew_score
        })
        self.total_scores['NS'] += ns_score
        self.total_scores['EW'] += ew_score
        self.game_phase = 'scoring'
        if self.current_round == 2 or self.current_round == 3:
            self.vulnerable['NS'] = True
        elif self.current_round == 4:
            self.vulnerable['EW'] = True
        elif self.current_round == 5:
            self.vulnerable['NS'] = True
            self.vulnerable['EW'] = True
    
    ### æ”¹å–„ç‚¹: è©³ç´°ãªã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£… ###
    def calculate_score(self):
        if not self.contract: return 0, 0

        declarer_partnership = self.get_partnership(self.declarer)
        tricks_needed = 6 + self.contract_level
        tricks_made = self.tricks_won[declarer_partnership]
        is_vulnerable = self.vulnerable[declarer_partnership]
        
        score = 0
        if tricks_made >= tricks_needed: # ãƒ¡ã‚¤ã‚¯ã—ãŸå ´åˆ
            # â‘  ãƒˆãƒªãƒƒã‚¯ç‚¹
            is_minor = self.trump_suit in ['â™£', 'â™¦']
            trick_base_points = 20 if is_minor else 30
            trick_score = self.contract_level * trick_base_points
            if self.trump_suit == 'NT':
                trick_score += 10
            
            trick_score *= (2 ** self.doubled) # ãƒ€ãƒ–ãƒ«/ãƒªãƒ€ãƒ–ãƒ«
            
            # â‘¡ ãƒœãƒ¼ãƒŠã‚¹ç‚¹
            game_threshold = 100
            is_game = trick_score >= game_threshold
            
            bonus = 0
            if self.contract_level == 7: # ã‚°ãƒ©ãƒ³ãƒ‰ã‚¹ãƒ©ãƒ 
                bonus = 1500 if is_vulnerable else 1000
            elif self.contract_level == 6: # ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚¹ãƒ©ãƒ 
                bonus = 750 if is_vulnerable else 500
            elif is_game: # ã‚²ãƒ¼ãƒ 
                bonus = 500 if is_vulnerable else 300
            else: # ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«
                bonus = 50

            score += trick_score + bonus
            
            # â‘¢ ãƒ€ãƒ–ãƒ«/ãƒªãƒ€ãƒ–ãƒ«æˆåŠŸãƒœãƒ¼ãƒŠã‚¹("for the insult")
            if self.doubled == 1: score += 50
            if self.doubled == 2: score += 100
                
            # â‘£ ã‚ªãƒ¼ãƒãƒ¼ãƒˆãƒªãƒƒã‚¯ç‚¹
            overtricks = tricks_made - tricks_needed
            if overtricks > 0:
                if self.doubled == 0:
                    score += overtricks * trick_base_points
                elif self.doubled == 1:
                    score += overtricks * (200 if is_vulnerable else 100)
                elif self.doubled == 2:
                    score += overtricks * (400 if is_vulnerable else 200)

            if declarer_partnership == 'NS': return score, 0
            else: return 0, score

        else: # ãƒ€ã‚¦ãƒ³ã—ãŸå ´åˆ
            undertricks = tricks_needed - tricks_made
            penalty = 0
            if self.doubled == 0: # ã‚¢ãƒ³ãƒ€ãƒ–ãƒ«
                penalty = undertricks * (100 if is_vulnerable else 50)
            elif self.doubled == 1: # ãƒ€ãƒ–ãƒ«
                if is_vulnerable:
                    # 200, 300, 300...
                    penalties = [200, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300]
                    penalty = sum(penalties[:undertricks])
                else:
                    # 100, 200, 200, 300, 300...
                    penalties = [100, 200, 200, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300]
                    penalty = sum(penalties[:undertricks])
            elif self.doubled == 2: # ãƒªãƒ€ãƒ–ãƒ«
                if is_vulnerable:
                    penalties = [400, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600]
                    penalty = sum(penalties[:undertricks])
                else:
                    penalties = [200, 400, 400, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600]
                    penalty = sum(penalties[:undertricks])
            
            defender_partnership = 'EW' if declarer_partnership == 'NS' else 'NS'
            if defender_partnership == 'NS': return penalty, 0
            else: return 0, penalty

    def start_new_round(self):
        if self.current_round < self.max_rounds:
            self.current_round += 1
            self.reset_for_new_deal()
            self.game_phase = 'deal'
            return True
        self.game_phase = 'game_over'
        return False
        
    def reset_for_new_deal(self):
        self.auction_history = []
        self.pass_count = 0
        self.contract = None
        self.declarer = None
        self.dummy = None
        self.trump_suit = None
        self.contract_level = 0
        self.doubled = 0
        self.dealer = self.get_next_player(self.dealer)
        self.current_bidder = self.dealer
        for player in self.players: self.players[player] = []
            
    def start_auction(self):
        self.game_phase = 'auction'
        self.current_bidder = self.dealer
        self.auction_history = []
        self.pass_count = 0

    def record_passout_round(self):
        self.round_scores.append({
            'round': self.current_round, 'contract': "Pass Out", 'declarer': None,
            'made': 0, 'ns_score': 0, 'ew_score': 0
        })
        self.game_phase = 'scoring'
        if self.current_round >= 2:
            self.vulnerable['NS'] = True; self.vulnerable['EW'] = True

    ### AIæ€è€ƒãƒ­ã‚¸ãƒƒã‚¯ (æ”¹å–„æ¸ˆã¿) ###
    def get_ai_auction_call(self, player: str) -> Dict:
        if not self.model: return {'type': 'pass'}
        # (AIã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã¯å‰å›ã¨åŒã˜ãªã®ã§çœç•¥)
        return {'type': 'pass'} # ä»®

    def get_ai_card_play(self, player: str) -> Optional[Card]:
        valid_cards = self.get_valid_cards(player)
        if not self.model: return random.choice(valid_cards) if valid_cards else None
        # (AIãƒ—ãƒ¬ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã¯å‰å›ã¨åŒã˜ãªã®ã§çœç•¥)
        return random.choice(valid_cards) if valid_cards else None # ä»®

# --- Streamlit UI Functions (å®Œå…¨ç‰ˆ) ---

def main():
    st.set_page_config(page_title="Contract Bridge Game", page_icon="ğŸƒ", layout="wide")
    
    st.title("ğŸƒ Contract Bridge - AI Enhanced Edition")
    
    if 'game' not in st.session_state:
        st.session_state.game = BridgeGame()
    
    game = st.session_state.game

    # ã‚µã‚¤ãƒ‰ãƒãƒ¼
    with st.sidebar:
        st.header("Game Info")
        st.metric("Round", f"{game.current_round}/{game.max_rounds}")
        st.metric("NS Total Score", game.total_scores['NS'])
        st.metric("EW Total Score", game.total_scores['EW'])
        st.write(f"NS Vulnerable: {'Yes' if game.vulnerable['NS'] else 'No'}")
        st.write(f"EW Vulnerable: {'Yes' if game.vulnerable['EW'] else 'No'}")
        
        st.markdown("---")
        if st.button("Start New Game"):
            st.session_state.game = BridgeGame()
            st.rerun()

    # ãƒ¡ã‚¤ãƒ³ç”»é¢ã®ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥è¡¨ç¤º
    if game.game_phase == 'partnership':
        show_partnership_phase(game)
    elif game.game_phase == 'deal':
        show_deal_phase(game)
    elif game.game_phase == 'auction':
        show_auction_phase(game)
    elif game.game_phase == 'play':
        show_play_phase(game)
    elif game.game_phase == 'scoring':
        show_round_results(game)
    elif game.game_phase == 'game_over':
        show_game_over(game)

def show_partnership_phase(game):
    st.header("Partnership Setup")
    st.info("This game uses fixed partnerships: **North-South** vs **East-West**. You are **South**.")
    if st.button("Start First Round"):
        with st.spinner("Determining dealer..."):
            game.determine_partnerships_and_dealer()
        st.rerun()

def show_deal_phase(game):
    st.header(f"Round {game.current_round} - Dealing")
    st.write(f"**Dealer:** {game.dealer}")
    if st.button("Deal Cards"):
        with st.spinner("Dealing cards..."):
            game.deal_cards()
            game.start_auction()
        st.rerun()

def show_auction_phase(game):
    st.header(f"ğŸ¯ Auction Phase - Round {game.current_round}")

    # ã‚ªãƒ¼ã‚¯ã‚·ãƒ§ãƒ³å±¥æ­´ã®è¡¨ç¤º
    st.subheader("Auction History")
    if game.auction_history:
        history_data = "Player | Call\n--- | ---\n"
        for call in game.auction_history:
            call_str = call['type'].capitalize()
            if call['type'] == 'bid':
                call_str = f"{call['level']}{call['suit']}"
            history_data += f"**{call['player']}** | {format_card_display(call_str)}\n"
        st.markdown(history_data, unsafe_allow_html=True)
    else:
        st.write("No bids yet.")

    st.markdown("---")
    st.write(f"**Current Bidder:** `{game.current_bidder}`")
    
    # è‡ªåˆ†ã®æ‰‹æœ­è¡¨ç¤º
    st.subheader("ğŸ´ Your Hand (South)")
    display_hand(game.players['South'])
    
    # ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚¿ãƒ¼ãƒ³
    if game.current_bidder == 'South':
        st.subheader("ğŸ—£ï¸ Your Call")
        cols = st.columns([2, 1, 1, 1])
        with cols[0]:
            level = st.selectbox("Level", list(range(1, 8)), key="bid_level")
            suit = st.radio("Suit", ['â™£', 'â™¦', 'â™¥', 'â™ ', 'NT'], horizontal=True, key="bid_suit")
            bid = {'type': 'bid', 'level': level, 'suit': suit}
            if st.button("Bid", disabled=not game.is_valid_bid(bid)):
                game.make_auction_call(bid)
                st.rerun()
        with cols[1]:
            if st.button("Pass", use_container_width=True):
                game.make_auction_call({'type': 'pass'})
                st.rerun()
        with cols[2]:
            if st.button("Double", disabled=not game.can_double(), use_container_width=True):
                game.make_auction_call({'type': 'double'})
                st.rerun()
        with cols[3]:
            if st.button("Redouble", disabled=not game.can_redouble(), use_container_width=True):
                game.make_auction_call({'type': 'redouble'})
                st.rerun()
    # AIã®ã‚¿ãƒ¼ãƒ³
    else:
        if st.button(f"Execute {game.current_bidder}'s AI Call"):
            with st.spinner(f"{game.current_bidder} is thinking..."):
                ai_call = game.get_ai_auction_call(game.current_bidder)
                game.make_auction_call(ai_call)
            st.rerun()

def show_play_phase(game):
    st.header(f"ğŸ® Play Phase - Round {game.current_round}")
    
    # ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆæƒ…å ±
    contract_str = f"{game.contract_level}{game.trump_suit}{'x'*game.doubled if game.doubled else ''}"
    st.info(f"**Contract:** {format_card_display(contract_str)} by **{game.declarer}** | **Dummy:** {game.dummy}")

    # ãƒˆãƒªãƒƒã‚¯æ•°
    cols = st.columns(2)
    cols[0].metric("NS Tricks Won", game.tricks_won['NS'])
    cols[1].metric("EW Tricks Won", game.tricks_won['EW'])
    
    # ç¾åœ¨ã®ãƒˆãƒªãƒƒã‚¯
    st.subheader("Current Trick")
    if game.current_trick:
        trick_cols = st.columns(4)
        for i, play in enumerate(game.current_trick):
            with trick_cols[i]:
                st.write(f"**{play['player']}**")
                st.markdown(f"## {format_card_display(play['card'])}", unsafe_allow_html=True)
    else:
        st.write(f"{game.trick_leader} to lead.")

    if len(game.current_trick) == 4:
        if st.button("Complete Trick"):
            game.complete_trick()
            st.rerun()
        return

    # ãƒ€ãƒŸãƒ¼ã®ãƒãƒ³ãƒ‰
    if game.dummy_revealed:
        st.subheader(f"Dummy's Hand ({game.dummy})")
        display_hand(game.players[game.dummy])

    # è‡ªåˆ†ã®ãƒãƒ³ãƒ‰
    st.subheader("Your Hand (South)")
    display_hand(game.players['South'])

    # ãƒ—ãƒ¬ã‚¤ãƒ­ã‚¸ãƒƒã‚¯
    current_player = game.trick_leader if not game.current_trick else game.get_next_player(game.current_trick[-1]['player'])
    st.markdown(f"--- \n ### It's **{current_player}**'s turn to play.")

    is_my_turn = (current_player == 'South') or (current_player == game.dummy and game.declarer == 'South')
    player_to_play = current_player

    if is_my_turn:
        st.write(f"Choose a card for **{player_to_play}**:")
        valid_cards = game.get_valid_cards(player_to_play)
        hand_to_play_from = game.players[player_to_play]

        # ã‚«ãƒ¼ãƒ‰é¸æŠãƒœã‚¿ãƒ³
        suits_in_hand = sorted(list(set(c.suit for c in hand_to_play_from)), key=lambda s: 'â™ â™¥â™¦â™£'.index(s))
        for suit in suits_in_hand:
            st.write(f"**{suit}**")
            card_cols = st.columns(13)
            suit_cards = sorted([c for c in hand_to_play_from if c.suit == suit], key=lambda c: c.value, reverse=True)
            for i, card in enumerate(suit_cards):
                is_valid = card in valid_cards
                if card_cols[i].button(str(card), key=f"play_{player_to_play}_{card}", disabled=not is_valid):
                    game.play_card(player_to_play, card)
                    st.rerun()

    elif current_player in ['North', 'East', 'West']:
        if st.button(f"Execute {current_player}'s AI Play"):
            with st.spinner(f"{current_player} is thinking..."):
                card_to_play = game.get_ai_card_play(current_player)
                if card_to_play:
                    game.play_card(current_player, card_to_play)
            st.rerun()

def show_round_results(game):
    st.header(f"ğŸ“Š Round {game.current_round} Results")
    
    latest_score = game.round_scores[-1]
    st.subheader(f"Contract: {format_card_display(latest_score['contract'])} by {latest_score['declarer']}")
    st.write(f"Tricks Made by Declarer: {latest_score['made']}/{6 + game.contract_level}")

    cols = st.columns(2)
    cols[0].metric("NS Score for this round", f"{latest_score['ns_score']:+}")
    cols[1].metric("EW Score for this round", f"{latest_score['ew_score']:+}")

    if st.button("Start Next Round"):
        if not game.start_new_round():
            st.rerun() # To go to game_over phase
        st.rerun()

def show_game_over(game):
    st.header("ğŸ‰ Game Over! ğŸ‰")
    st.balloons()

    ns_total = game.total_scores['NS']
    ew_total = game.total_scores['EW']
    
    st.subheader("Final Scores")
    cols = st.columns(2)
    cols[0].metric("North-South Final Score", ns_total)
    cols[1].metric("East-West Final Score", ew_total)

    if ns_total > ew_total:
        st.success(f"ğŸ¥‡ North-South wins by {ns_total - ew_total} points!")
    elif ew_total > ns_total:
        st.error(f"ğŸ¥‡ East-West wins by {ew_total - ns_total} points!")
    else:
        st.info("ğŸ¤ It's a tie!")

    st.subheader("Round History")
    st.table(game.round_scores)

def display_hand(hand):
    """æ‰‹æœ­ã‚’ã‚¹ãƒ¼ãƒˆã”ã¨ã«æ•´ç†ã—ã¦è¡¨ç¤ºã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°"""
    suits_in_hand = sorted(list(set(c.suit for c in hand)), key=lambda s: 'â™ â™¥â™¦â™£'.index(s))
    hand_str = ""
    for suit in suits_in_hand:
        cards = sorted([c.rank for c in hand if c.suit == suit], key=lambda r: Card(suit, r).value, reverse=True)
        hand_str += f"**{suit}**: {' '.join(cards)} \n"
    st.markdown(hand_str)

if __name__ == "__main__":
    main()